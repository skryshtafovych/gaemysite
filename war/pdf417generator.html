<!DOCTYPE html>
<!-- saved from url=(0044)http://fiddle.jshell.net/sxGtM/3/show/light/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <title> Lottery  DEV PDF 417 Spaceship Stepan</title>


  <script type="text/javascript" src="jquery-1.5.2.js"></script>

	<script src="bcmath-min.js" type="text/javascript"></script>
    <script src="pdf417-min.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="normalize(1).css">


  <link rel="stylesheet" type="text/css" href="result-light.css">

  <style type="text/css">
    form {
    line-height: 2em;
}
p {
    margin: 5px 0;
}
h2 {
    margin: 10px 0;
    font-size: 1.2em;
    font-weight: bold
}
#result {
    margin: 10px;
    background: #eee;
    padding: 10px;
    height: 40px;
    overflow: auto;
}




  </style>

    <!-- Loading Bootstrap -->

  <!-- Loading Flat UI -->
  <link href="dist/css/flat-ui.css" rel="stylesheet">
  <link href="docs/assets/css/demo.css" rel="stylesheet">


<script type="text/javascript">
function generate_pdf() {
  var msg = document.getElementById('msg').value;
  $('#barcode').empty();

  var lottery_array = msg.split(',');
  var arrayLength = lottery_array.length;






  $.each(lottery_array, function(i,val) {

    if(lottery_array[i].length == 20){


          var ticket_code1 = val.slice(0,4);
          var ticket_code2 = val.slice(4,13);
          var ticket_id = val.slice(13,20);

          var fullticket = ticket_code1+ticket_id+000+ticket_code2+0000;
          var fullticket1 = ticket_code1.concat(ticket_id,0,0,0,ticket_code2,0,0,0,0);



            PDF417.init(val);
            var barcode = PDF417.getBarcodeArray();

            var bw = 4;
            var bh = 4;
            var canvas = document.createElement('canvas');
            var canvas1 = document.createElement('canvas1');

            canvas.width = bw * barcode['num_cols'];
            canvas.height = bh * barcode['num_rows'];


        //    document.getElementById("barcodecontent1").appendChild(canvas1);

          //  barcodecontent1.innerHTML=lottery_array[i];

            document.getElementById('barcode').appendChild(canvas);
            document.getElementById("barcodecontent").innerHTML='  Scratchers Code: '+lottery_array[i] + "<br />" +'Entered CODE length  '+val.length + "<br />" +'Ticket created:'+fullticket1 + "<br />" +'Created Length:'+fullticket1.length;



            var ctx = canvas.getContext('2d');
            var y = 0;
            for ( var r = 0; r < barcode['num_rows']; ++r) {

              var x = 0;
              for ( var c = 0; c < barcode['num_cols']; ++c) {
                if (barcode['bcode'][r][c] == 1) {
                  ctx.fillRect(x, y, bw, bh);
                }
                x += bw;
              }
              y += bh;
            }


      return

    }


    PDF417.init(val);
    var barcode = PDF417.getBarcodeArray();

    var bw = 4;
    var bh = 4;
    var canvas = document.createElement('canvas');
    var canvas1 = document.createElement('canvas1');

    canvas.width = bw * barcode['num_cols'];
    canvas.height = bh * barcode['num_rows'];


//    document.getElementById("barcodecontent1").appendChild(canvas1);

  //  barcodecontent1.innerHTML=lottery_array[i];

    document.getElementById('barcode').appendChild(canvas);
    document.getElementById("barcodecontent").innerHTML='  Draw Game Code: '+lottery_array[i] + "<br />" +'Entered CODE length  '+val.length + "<br />" +'Ticket created:'+val + "<br />" +'Created Length:'+val.length;



    var ctx = canvas.getContext('2d');
    var y = 0;
    for ( var r = 0; r < barcode['num_rows']; ++r) {

      var x = 0;
      for ( var c = 0; c < barcode['num_cols']; ++c) {
        if (barcode['bcode'][r][c] == 1) {
          ctx.fillRect(x, y, bw, bh);
        }
        x += bw;
      }
      y += bh;
    }









  });





}




function generate_scratchers_pdf() {
  var msg = document.getElementById('msg').value;
  $('#barcode').empty();

  var lottery_array = msg.split(',');
  var arrayLength = lottery_array.length;


  $.each(lottery_array, function(i,val) {


    var ticket_code1 = val.slice(0,4);
    var ticket_code2 = val.slice(4,13);
    var ticket_id = val.slice(13,20);

    var fullticket = ticket_code1+ticket_id+000+ticket_code2+0000;
    var fullticket1 = ticket_code1.concat(ticket_id,0,0,0,ticket_code2,0,0,0,0);



      PDF417.init(val);
      var barcode = PDF417.getBarcodeArray();

      var bw = 4;
      var bh = 4;
      var canvas = document.createElement('canvas');
      var canvas1 = document.createElement('canvas1');

      canvas.width = bw * barcode['num_cols'];
      canvas.height = bh * barcode['num_rows'];


  //    document.getElementById("barcodecontent1").appendChild(canvas1);

    //  barcodecontent1.innerHTML=lottery_array[i];

      document.getElementById('barcode').appendChild(canvas);
      document.getElementById("barcodecontent").innerHTML='  Scratchers Code: '+lottery_array[i] + "<br />" +'Entered CODE length  '+val.length + "<br />" +'Ticket created:'+fullticket1 + "<br />" +'Created Length:'+fullticket1.length;



      var ctx = canvas.getContext('2d');
      var y = 0;
      for ( var r = 0; r < barcode['num_rows']; ++r) {

        var x = 0;
        for ( var c = 0; c < barcode['num_cols']; ++c) {
          if (barcode['bcode'][r][c] == 1) {
            ctx.fillRect(x, y, bw, bh);
          }
          x += bw;
        }
        y += bh;
      }





  });





}


</script>







</head>
<body>
  <center>
  <h1 id="spaceship_title">Lottery DEV PDF generator</h1>
  <h3 class="footer-title">Comma seperate you data to generate multiple codes at once......Still under CONSTRUCTION... nice formatting coming soon.--SK </h3>

  <div data-role="content">
  </br>
  <textarea id="msg" rows="10" cols="40">Code to generate!</textarea>
  </br>
  <center>
    <a onclick="generate_pdf();" data-role="button" data-inline="true">Smart PDF-417 Barcode generator</a><br>
    <a onclick="generate_scratchers_pdf();" data-role="button" data-inline="true">Generate  Scratchers PDF-417 Barcode</a>

  </center>
  </br> </br>
  <div id="barcodecontent"></div>
    <div id="barcode" ></div>
  </center>
</div>





</body></html>
