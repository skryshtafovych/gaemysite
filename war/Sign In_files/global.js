/*****************************************************************************
jQuery Placeholder 1.1.1

Copyright (c) 2010 Michael J. Ryan (http://tracker1.info/)

Dual licensed under the MIT and GPL licenses:
	http://www.opensource.org/licenses/mit-license.php
	http://www.gnu.org/licenses/gpl.html

------------------------------------------------------------------------------

Sets up a watermark for inputted fields... this will create a LABEL.watermark 
tag immediately following the input tag, the positioning will be set absolute, 
and it will be positioned to match the input tag.

To activate on all tags with a 'data-watermark' attribute:

	$('input[placeholder],textarea[placeholder]').placeholder();


To style the tags as appropriate (you'll want to make sure the font matches):

	label.placeholder {
		cursor: text;				<--- display a cursor to match the text input

		padding: 4px 4px 4px 4px;   <--- this should match the border+padding 
											for the input field(s)
		color: #999999;				<--- this will display as faded
	}

You'll also want to have the color set for browsers with native support
	input:placeholder, textarea:placeholder {
		color: #999999;
	}
	input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
		color: #999999;
	}

------------------------------------------------------------------------------

Thanks to...
	http://www.alistapart.com/articles/makingcompactformsmoreaccessible
	http://plugins.jquery.com/project/overlabel

	This works similar to the overlabel, but creates the actual label tag
	based on a data-watermark attribute on the input tag, instead of 
	relying on the markup to provide it.

*****************************************************************************/

/*
    * jQuery UI selectmenu
    *
    * Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
    * Dual licensed under the MIT (MIT-LICENSE.txt)
    * and GPL (GPL-LICENSE.txt) licenses.
    *
    * http://docs.jquery.com/UI
    */

/*
 * Metadata - jQuery plugin for parsing metadata from elements
 *
 * Copyright (c) 2006 John Resig, Yehuda Katz, J�örn Zaefferer, Paul McLanahan
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Revision: $Id: jquery.metadata.js 3640 2007-10-11 18:34:38Z pmclanahan $
 *
 */

define("modules/main-nav", ["jquery"], function (e) { return { init: function () { function s() { i.removeClass("hover"), t.hide() } function o(e) { t.css({ left: e.data.left, right: e.data.right }) } function u(n) { n.type == "click" && this != t[0] && n.preventDefault(); var o = e(this); if (o.attr("id") === "my-account") { var u = o.has("p.login"); u.length == 0 && e("#my-account-flyout").toggle(n.type === "mouseenter"); return } clearTimeout(r); if (n.type === "mouseenter" || n.type === "focus" || n.type === "click") { if (o.attr("id") !== "submenu") { i.length && (i.removeClass("hover"), i.data("hover_element").hide()); if (n.type === "click" && i.data("hover_element") !== undefined && o.data("hover_element") !== undefined && i.data("hover_element").selector === o.data("hover_element").selector) { s(); return } i = o.addClass("hover"), t.show(), i.data("hover_element").trigger("loadDeferredImages").show() } } else r = window.setTimeout(s, 100) } var t = e("#submenu"), n = e("#main-nav"), r, i = e([]); n.children("li").each(function (t) { var n = e(this); n.data({ hover_element: e("#" + n.data("hover_content")) }); var r = {}; n.hasClass("my-account") ? (r.left = "auto", r.right = 10) : (r.left = 11, r.right = 0), n.bind("mouseenter", r, o), e("a", n).bind("focus", r, o), e("a", n).bind("focus", e.proxy(u, n)), e("a", n).bind("blur", s) }).add(t)[navigator.userAgent.match(/Android/i) ? "click" : "hover"](u); var a = e("#left-column #sub-nav li.last > a"); a.each(function (t) { e(this).next().length == 0 && a.length > t + 1 && e(this).parent().removeClass("last"), e(this).next().length > 0 && (e(this).parent().hasClass("selected") || e(this).parent().hasClass("open")) && e(this).parent().removeClass("last") }) } } }), define("modules/sign-in", ["jquery", "jqueryui"], function (e) { function t(e) { var t = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i); return t.test(e) } return { init: function () { var t = e("#signin-dialog").dialog({ height: "auto", modal: !0, resizable: !1, draggable: !1, autoOpen: !1, width: "auto" }); e("#signin, .signin").click(function (e) { e.preventDefault(), t.dialog("open"), t.find(".login_button").trigger("focus"), t.find("input").bind("keypress", function (e) { var n = e.keyCode ? e.keyCode : e.which; n == 13 && (e.preventDefault(), t.find(".login_button").trigger("click")) }) }), e("#error1").addClass("error_supressor"), e(".login_button").click(function (t) { e("#error1").removeClass("error_supressor").html("<p>Processing ...</p>") }) } } }), define("plugins/placeholder", ["jquery"], function (e) { function o() { if (r) return; e("." + t).live("click", u).live("focusin", u).live("focusout", a), bound = !0, r = !0 } function u() { var t = e(this), r = e(t.data(n)); r.css("display", "none") } function a() { var t = this; setTimeout(function () { var r = e(t); e(r.data(n)).css("top", r.position().top + "px").css("left", r.position().left + "px").css("display", r.val() ? "none" : "block") }, 200) } var t = "PLACEHOLDER-INPUT", n = "PLACEHOLDER-LABEL", r = !1, i = { labelClass: "placeholder" }, s = document.createElement("input"); if ("placeholder" in s) { e.fn.placeholder = e.fn.unplaceholder = function () { }, delete s; return } delete s, e.fn.placeholder = function (r) { o(); var s = e.extend(i, r); this.each(function () { var r = Math.random().toString(32).replace(/\./, ""), i = e(this), o = e('<label style="position:absolute;display:none;top:0;left:0;"></label>'); if (!i.attr("placeholder") || i.data(t) === t) return; i.attr("id") || i.attr("id", "input_" + r), o.attr("id", i.attr("id") + "_placeholder").data(t, "#" + i.attr("id")).attr("for", i.attr("id")).addClass(s.labelClass).addClass(s.labelClass + "-for-" + this.tagName.toLowerCase()).addClass(n).text(i.attr("placeholder")), i.data(n, "#" + o.attr("id")).data(t, t).addClass(t).after(o), u.call(this), a.call(this) }) }, e.fn.unplaceholder = function () { this.each(function () { var r = e(this), i = e(r.data(n)); if (r.data(t) !== t) return; i.remove(), r.removeData(t).removeData(n).removeClass(t) }) } }), define("plugins/ui.selectmenu", ["jquery", "jqueryui"], function (e) { e.widget("ui.selectmenu", { getter: "value", version: "1.8", eventPrefix: "selectmenu", options: { transferClasses: !0, style: "popup", width: null, menuWidth: null, handleWidth: 26, maxHeight: 300, icons: null, format: null }, _create: function () { var t = this, n = this.options, r = this.element.attr("id") || "ui-selectmenu-" + Math.random().toString(16).slice(2, 10); this.ids = [r + "-" + "button", r + "-" + "menu"], this._safemouseup = !0, this.newelement = e('<a class="' + this.widgetBaseClass + ' ui-widget ui-state-default ui-corner-all" id="' + this.ids[0] + '" role="button" href="#" aria-haspopup="true" aria-owns="' + this.ids[1] + '"></a>').insertAfter(this.element); var i = this.element.attr("tabindex"); i && this.newelement.attr("tabindex", i), this.newelement.data("selectelement", this.element), this.selectmenuIcon = e('<span class="' + this.widgetBaseClass + '-icon ui-icon"></span>').prependTo(this.newelement).addClass(n.style == "popup" ? "ui-icon-triangle-2-n-s" : "ui-icon-triangle-1-s"), e("label[for=" + this.element.attr("id") + "]").attr("for", this.ids[0]).bind("click", function () { return t.newelement[0].focus(), !1 }), this.newelement.bind("mousedown", function (e) { return t._toggle(e), n.style == "popup" && (t._safemouseup = !1, setTimeout(function () { t._safemouseup = !0 }, 300)), !1 }).bind("click", function () { return !1 }).keydown(function (n) { var r = !0; switch (n.keyCode) { case e.ui.keyCode.ENTER: r = !0; break; case e.ui.keyCode.SPACE: r = !1, t._toggle(n); break; case e.ui.keyCode.UP: case e.ui.keyCode.LEFT: r = !1, t._moveSelection(-1); break; case e.ui.keyCode.DOWN: case e.ui.keyCode.RIGHT: r = !1, t._moveSelection(1); break; case e.ui.keyCode.TAB: r = !0; break; default: r = !1, t._typeAhead(n.keyCode, "mouseup") } return r }).bind("mouseover focus", function () { n.disabled || e(this).addClass(t.widgetBaseClass + "-focus ui-state-hover") }).bind("mouseout blur", function () { n.disabled || e(this).removeClass(t.widgetBaseClass + "-focus ui-state-hover") }), e(document).mousedown(function (e) { t.close(e) }), this.element.click(function () { this._refreshValue() }).focus(function () { this.newelement && this.newelement[0].focus() }); var s = n.style == "dropdown" ? " ui-corner-bottom" : " ui-corner-all"; this.list = e('<ul class="' + t.widgetBaseClass + "-menu ui-widget ui-widget-content" + s + '" aria-hidden="true" role="listbox" aria-labelledby="' + this.ids[0] + '" id="' + this.ids[1] + '"></ul>').appendTo("body"); var o = []; this.element.find("option").each(function () { o.push({ value: e(this).attr("value"), text: t._formatText(jQuery(this).text()), selected: e(this).attr("selected"), classes: e(this).attr("class"), parentOptGroup: e(this).parent("optgroup").attr("label") }) }); var u = t.options.style == "popup" ? " ui-state-active" : ""; for (var a = 0; a < o.length; a++) { var f = e('<li role="presentation"><a href="#" tabindex="-1" role="option" aria-selected="false">' + o[a].text + "</a></li>").data("index", a).addClass(o[a].classes).data("optionClasses", o[a].classes || "").mouseup(function (n) { if (t._safemouseup) { var r = e(this).data("index") != t._selectedIndex(); t.value(e(this).data("index")), t.select(n), r && t.change(n), t.close(n, !0) } return !1 }).click(function () { return !1 }).bind("mouseover focus", function () { t._selectedOptionLi().addClass(u), t._focusedOptionLi().removeClass(t.widgetBaseClass + "-item-focus ui-state-hover"), e(this).removeClass("ui-state-active").addClass(t.widgetBaseClass + "-item-focus ui-state-hover") }).bind("mouseout blur", function () { e(this).is(t._selectedOptionLi()) && e(this).addClass(u), e(this).removeClass(t.widgetBaseClass + "-item-focus ui-state-hover") }); if (o[a].parentOptGroup) { var l = t.widgetBaseClass + "-group-" + o[a].parentOptGroup.replace(/[^a-zA-Z0-9]/g, ""); this.list.find("li." + l).size() ? this.list.find("li." + l + ":last ul").append(f) : e('<li role="presentation" class="' + t.widgetBaseClass + "-group " + l + '"><span class="' + t.widgetBaseClass + '-group-label">' + o[a].parentOptGroup + "</span><ul></ul></li>").appendTo(this.list).find("ul").append(f) } else f.appendTo(this.list); this.list.bind("mousedown mouseup", function () { return !1 }); if (n.icons) for (var c in n.icons) if (f.is(n.icons[c].find)) { f.data("optionClasses", o[a].classes + " " + t.widgetBaseClass + "-hasIcon").addClass(t.widgetBaseClass + "-hasIcon"); var h = n.icons[c].icon || ""; f.find("a:eq(0)").prepend('<span class="' + t.widgetBaseClass + "-item-icon ui-icon " + h + '"></span>') } } this.list.find("li:last").addClass("ui-corner-bottom"), n.style == "popup" && this.list.find("li:first").addClass("ui-corner-top"); if (n.transferClasses) { var p = this.element.attr("class") || ""; this.newelement.add(this.list).addClass(p) } var d = this.element.width(); this.newelement.width(n.width ? n.width : d), n.style == "dropdown" ? this.list.width(n.menuWidth ? n.menuWidth : n.width ? n.width : d) : this.list.width(n.menuWidth ? n.menuWidth : n.width ? n.width - n.handleWidth : d - n.handleWidth), n.maxHeight && n.maxHeight < this.list.height() && this.list.height(n.maxHeight), this._optionLis = this.list.find("li:not(." + t.widgetBaseClass + "-group)"), this.list.keydown(function (n) { var r = !0; switch (n.keyCode) { case e.ui.keyCode.HOME: r = !1, t._moveFocus(":first"); break; case e.ui.keyCode.PAGE_UP: r = !1, t._scrollPage("up"); break; case e.ui.keyCode.PAGE_DOWN: r = !1, t._scrollPage("down"); break; case e.ui.keyCode.END: r = !1, t._moveFocus(":last"); break; case e.ui.keyCode.ENTER: case e.ui.keyCode.SPACE: r = !1, t.close(n, !0), e(n.target).parents("li:eq(0)").trigger("mouseup"); break; case e.ui.keyCode.TAB: r = !0, t.close(n, !0); break; case e.ui.keyCode.ESCAPE: r = !1, t.close(n, !0); break; default: r = !1, t._typeAhead(n.keyCode, "focus") } return r }), n.style == "dropdown" ? (this.newelement.addClass(t.widgetBaseClass + "-dropdown"), this.list.addClass(t.widgetBaseClass + "-menu-dropdown")) : (this.newelement.addClass(t.widgetBaseClass + "-popup"), this.list.addClass(t.widgetBaseClass + "-menu-popup")), this.newelement.prepend('<span class="' + t.widgetBaseClass + '-status">' + o[this._selectedIndex()].text + "</span>"), this.element.hide(), this.element.attr("disabled") == 1 && this.disable(), this.value(this._selectedIndex()), e(window).resize(function () { t._refreshPosition() }) }, destroy: function () { this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass + "-disabled" + " " + this.namespace + "-state-disabled").removeAttr("aria-disabled").unbind("click"), e("label[for=" + this.newelement.attr("id") + "]").attr("for", this.element.attr("id")).unbind("click"), this.newelement.remove(), this.list.remove(), this.element.show(), e.Widget.prototype.destroy.apply(this, arguments) }, _typeAhead: function (t, n) { function o(t, i) { s = !0, e(t).trigger(n), r._prevChar[1] = i } var r = this; r._prevChar || (r._prevChar = ["", 0]); var i = String.fromCharCode(t); c = i.toLowerCase(); var s = !1; this.list.find("li a").each(function (t) { if (!s) { var n = e(this).text(); if (n.indexOf(i) == 0 || n.indexOf(c) == 0) r._prevChar[0] == i ? r._prevChar[1] < t && o(this, t) : o(this, t) } }), this._prevChar[0] = i }, _uiHash: function () { var t = this.value(); return { index: t, option: e("option", this.element).get(t), value: this.element[0].value} }, open: function (e) { var t = this, n = this.newelement.attr("aria-disabled"); n != "true" && (this._refreshPosition(), this._closeOthers(e), this.newelement.addClass("ui-state-active"), this.list.appendTo("body").addClass(t.widgetBaseClass + "-open").attr("aria-hidden", !1).find("li:not(." + t.widgetBaseClass + "-group):eq(" + this._selectedIndex() + ") a")[0].focus(), this.options.style == "dropdown" && this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"), this._refreshPosition(), this._trigger("open", e, this._uiHash())) }, close: function (e, t) { this.newelement.is(".ui-state-active") && (this.newelement.removeClass("ui-state-active"), this.list.attr("aria-hidden", !0).removeClass(this.widgetBaseClass + "-open"), this.options.style == "dropdown" && this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"), t && this.newelement[0].focus(), this._trigger("close", e, this._uiHash())) }, change: function (e) { this.element.trigger("change"), this._trigger("change", e, this._uiHash()) }, select: function (e) { this._trigger("select", e, this._uiHash()) }, _closeOthers: function (t) { e("." + this.widgetBaseClass + ".ui-state-active").not(this.newelement).each(function () { e(this).data("selectelement").selectmenu("close", t) }), e("." + this.widgetBaseClass + ".ui-state-hover").trigger("mouseout") }, _toggle: function (e, t) { this.list.is("." + this.widgetBaseClass + "-open") ? this.close(e, t) : this.open(e) }, _formatText: function (e) { return this.options.format ? this.options.format(e) : e }, _selectedIndex: function () { return this.element[0].selectedIndex }, _selectedOptionLi: function () { return this._optionLis.eq(this._selectedIndex()) }, _focusedOptionLi: function () { return this.list.find("." + this.widgetBaseClass + "-item-focus") }, _moveSelection: function (e) { var t = parseInt(this._selectedOptionLi().data("index"), 10), n = t + e; return this._optionLis.eq(n).trigger("mouseup") }, _moveFocus: function (e) { if (!isNaN(e)) var t = parseInt(this._focusedOptionLi().data("index"), 10), n = t + e; else var n = parseInt(this._optionLis.filter(e).data("index"), 10); n < 0 && (n = 0), n > this._optionLis.size() - 1 && (n = this._optionLis.size() - 1); var r = this.widgetBaseClass + "-item-" + Math.round(Math.random() * 1e3); this._focusedOptionLi().find("a:eq(0)").attr("id", ""), this._optionLis.eq(n).find("a:eq(0)").attr("id", r)[0].focus(), this.list.attr("aria-activedescendant", r) }, _scrollPage: function (e) { var t = Math.floor(this.list.outerHeight() / this.list.find("li:first").outerHeight()); t = e == "up" ? -t : t, this._moveFocus(t) }, _setOption: function (e, t) { this.options[e] = t, e == "disabled" && (this.close(), this.element.add(this.newelement).add(this.list)[t ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled" + " " + this.namespace + "-state-disabled").attr("aria-disabled", t)) }, value: function (e) { return arguments.length && (this.element[0].selectedIndex = e, this._refreshValue(), this._refreshPosition()), this.element[0].selectedIndex }, _refreshValue: function () { var e = this.options.style == "popup" ? " ui-state-active" : "", t = this.widgetBaseClass + "-item-" + Math.round(Math.random() * 1e3); this.list.find("." + this.widgetBaseClass + "-item-selected").removeClass(this.widgetBaseClass + "-item-selected" + e).find("a").attr("aria-selected", "false").attr("id", ""), this._selectedOptionLi().addClass(this.widgetBaseClass + "-item-selected" + e).find("a").attr("aria-selected", "true").attr("id", t); var n = this.newelement.data("optionClasses") ? this.newelement.data("optionClasses") : "", r = this._selectedOptionLi().data("optionClasses") ? this._selectedOptionLi().data("optionClasses") : ""; this.newelement.removeClass(n).data("optionClasses", r).addClass(r).find("." + this.widgetBaseClass + "-status").html(this._selectedOptionLi().find("a:eq(0)").html()), this.list.attr("aria-activedescendant", t) }, _refreshPosition: function () { var t = this, n = this.options, r = t._pageScroll(), i = this.newelement.offset().top, s = e(window).height(), o = e(this.list[0]).outerHeight(); if (i + o > s + r) i -= o; else if (this.newelement.is("." + this.widgetBaseClass + "-popup")) { var u = this.list[0].scrollTop; this.list.find("li:lt(" + this._selectedIndex() + ")").each(function () { u -= e(this).outerHeight() }), i += u } else i += this.newelement.height(); this.list.css({ top: i, left: this.newelement.offset().left }) }, _pageScroll: function () { var e; return self.pageYOffset ? e = self.pageYOffset : document.documentElement && document.documentElement.scrollTop ? e = document.documentElement.scrollTop : document.body && (e = document.body.scrollTop), e } }) }), define("plugins/jquery.textshadow", ["jquery"], function (e) { (function (e, t, n) { function u(t) { e(t).contents().each(function () { if (this.nodeType === 3 && this.data) return a(this), !0; var t = e(this); if (this.nodeType === 1 && (!t.hasClass("ui-text-shadow") || !t.hasClass("ui-text-shadow-original") || !t.hasClass("ui-text-shadow-copy"))) return u(this), !0 }) } function a(t) { var n = t.nodeValue, r = n.split(/\s/), i, s = 0, u, a; if (!n) return; var f = document.createDocumentFragment(); e.each(r, function () { i = this.length; if (!i) return !0; o.lastIndex = s + i, u = o.exec(n), a = h(n.substr(s, i + u[1].length)), a !== null && f.appendChild(a), s = s + i + u[1].length }), t.parentNode.replaceChild(f.cloneNode(!0), t) } function h(e) { if (!e.length) return null; var t = f.cloneNode(), n = l.cloneNode(), r = c.cloneNode(); return t.appendChild(n), t.appendChild(r), n.appendChild(document.createTextNode(e)), r.appendChild(document.createTextNode(e)), t } function p(e) { var t = i.exec(e), n; return t && t[1] === "hsla" && (n = v(t[2], t[3], t[4]), t[2] = n[0], t[3] = n[1], t[4] = n[2]), t ? "#" + (1 << 24 | t[2] << 16 | t[3] << 8 | t[4]).toString(16).substr(1) : e } function d(e) { var t = i.exec(e); return t ? t[5] !== n ? t[5] : 1 : 1 } function v(e, t, n) { var r, i, s, o, u, a; return t /= 100, n /= 100, t === 0 ? o = u = a = n * 255 : (n <= .5 ? i = n * (t + 1) : i = n + t - n * t, r = n * 2 - i, s = e / 360, o = m(r, i, s + 1 / 3), u = m(r, i, s), a = m(r, i, s - 1 / 3)), [o, u, a] } function m(e, t, n) { var r; return n < 0 ? n += 1 : n > 1 && (n -= 1), 6 * n < 1 ? r = e + (t - e) * n * 6 : 2 * n < 1 ? r = t : 3 * n < 2 ? r = e + (t - e) * (2 / 3 - n) * 6 : r = e, 255 * r } var r = /([\d+.\-]+[a-z%]*)\s*([\d+.\-]+[a-z%]*)\s*([\d+.\-]+[a-z%]*)?\s*([#a-z]*.*)?/, i = /(rgb|hsl)a?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*([\.\d]+))?/, s = "progid:DXImageTransform.Microsoft.", o = /(\s*)/g; e.fn.textshadow = function (t, i) { var s = r.exec(t), o, a, f, l, c; return o = parseFloat(s[1]), a = parseFloat(s[2]), f = s[3] !== n ? parseFloat(s[3]) : 0, c = d(s[4]), this.each(function () { var t = e(this), n; n = t.find(".ui-text-shadow-copy"), n.length || (u(this), n = t.find(".ui-text-shadow-copy")) }) }; var f = e('<span class="ui-text-shadow" />')[0], l = e('<span class="ui-text-shadow-original" />')[0], c = e('<span class="ui-text-shadow-copy" />')[0] })(jQuery, this) }), function ($) { $.extend({ metadata: { defaults: { type: "class", name: "metadata", cre: /({.*})/, single: "metadata" }, setType: function (e, t) { this.defaults.type = e, this.defaults.name = t }, get: function (elem, opts) { var settings = $.extend({}, this.defaults, opts); settings.single.length || (settings.single = "metadata"); var data = $.data(elem, settings.single); if (data) return data; data = "{}"; var getData = function (data) { if (typeof data != "string") return data; data.indexOf("{") < 0 && (data = eval("(" + data + ")")) }, getObject = function (data) { return typeof data != "string" ? data : (data = eval("(" + data + ")"), data) }; if (settings.type == "html5") { var object = {}; $(elem.attributes).each(function () { var e = this.nodeName; if (!e.match(/^data-/)) return !0; e = e.replace(/^data-/, ""), object[e] = getObject(this.nodeValue) }) } else { if (settings.type == "class") { var m = settings.cre.exec(elem.className); m && (data = m[1]) } else if (settings.type == "elem") { if (!elem.getElementsByTagName) return; var e = elem.getElementsByTagName(settings.name); e.length && (data = $.trim(e[0].innerHTML)) } else if (elem.getAttribute != undefined) { var attr = elem.getAttribute(settings.name); attr && (data = attr) } object = getObject(data.indexOf("{") < 0 ? "{" + data + "}" : data) } return $.data(elem, settings.single, object), object } } }), $.fn.metadata = function (e) { return $.metadata.get(this[0], e) } } (jQuery), define("plugins/jquery.metadata", function () { }), define("global", ["jquery", "modules/main-nav", "modules/sign-in", "plugins/placeholder", "plugins/ui.selectmenu", "plugins/jquery.textshadow", "plugins/jquery.metadata"], function (e, t, n) { e.fn.corners = function () { var t = ["tl", "tr"]; this.each(function () { var n = e(this); n.addClass("ui-corners main-hero-corners"), n.wrapInner('<div class="ui-corners-content" />'), e.each(t, function () { n.prepend(e('<span class="ui-corners-' + this + '"/>')) }) }) }, function (e, t, n) { var r = ["#home .game-bar .pick .ui-selectmenu", "#home .box h2", "#home .box"], i = parseInt(e.browser.version); if (e.browser.msie && i < 9) { var s = 1; function o() { if (screen.systemXDPI === n) { var i = document.body.getBoundingClientRect(); s = (i.right - i.left) / document.body.offsetWidth } else s = screen.deviceXDPI / screen.logicalXDPI; if (s !== 1) { e("html").addClass("zoomed").removeClass("no-zoomed"); var u = t.setTimeout(o, 100) } else e("html").addClass("no-zoomed").removeClass("zoomed"); e.each(r, function () { e(".zoomed " + this).each(function () { this.style.behavior = "" }), e(".no-zoomed " + this).each(function () { this.style.behavior = "" }) }) } e(t).resize(function () { o() }), o() } } (jQuery, this); var r = e(".ielt9 #main section#hero div.full-page").not(".no-corners"); r.length > 0 && r.corners(); var s = e(".ielt9 #hero .two-col").not(".no-corners"); s.length > 0 && s.corners(), e("#main-nav").ready(t.init), n.init(); var o = e("#signin-dialog").parent(); o.appendTo(document.forms.item(0) != null ? document.forms.item(0) : document.body), e("#tab-container").tabs(); var u = e(".hasnotification"); u.length > 0 && u.html() == "yes" && (e(".winner-notification-dialog").dialog({ height: "auto", modal: !0, resizable: !1, draggable: !1, autoOpen: !0, width: 792, closeOnEscape: !1, open: function (t, n) { e(".ui-dialog-titlebar-close", e(this).parent()).hide() } }), e(".winner-notification-dialog").parent().appendTo("/html/body/form[0]")), e(".modal-close-trigger") && e(".modal-close-trigger").length > 0 && e(".modal-close-trigger").each(function () { e(this).click(function (t) { t.preventDefault(), e(this).closest(".ui-dialog-content").dialog("close"), e("html").hasClass("ie") && e(".ui-dialog:visible").hide() }) }); var a = e("#winning_number_dialog"), f = e("#winning-numbers"), l = function (t, n) { var r = function (n) { n.preventDefault(); if (t.dialog("isOpen") == 1) return; e("body").addClass("tag_floatable"), e(".winning_selected, .ui-widget-overlay").show(), t.parent().addClass("winning_selected"), t.dialog("open"), e(".winning_logo").show(), (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i)) && e(".winning_selected").css("left", "32px") }; if (n != undefined && n.data().winningNumbersDialog != undefined) { var i = n.data().winningNumbersDialog.dialog("destroy"); i.remove() } var s = function () { e(this).trigger("wnfoDialogOpen") }, o = function () { e(this).trigger("wnfoDialogClose") }; t.dialog({ autoOpen: !1, closeOnEscape: !0, modal: !0, resizable: !1, draggable: !1, open: s, close: o }), n != undefined && n.data({ winningNumbersDialog: t }), e(".ui-dialog-content-close", t).click(function (e) { e.preventDefault(), t.dialog("close") }); var u = function (n, r) { e("body").removeClass("tag_floatable"), e(".winning_logo.wnfoClone").remove(), e(".winning_logo").hide() }; e("body").bind("dialogbeforeclose", u), e("a", f).bind("click.wnfo", r), (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i)) && e("a", f).triggerHandler("click.wnfo") }; if (a.length > 0) l(a); else { var c = function (t) { var n = this, r = e("#winning_number_dialog_target"); opts = { flyoutDataTarget: "/webslices/WinningNumbersFlyOut", reloadOnActivate: !1, showSpinnerAfter: 200, spinnerSel: ".winningNumbersSpinner", errorMessageHTML: '<div id="winning_number_dialog" style="display: none;"><div><a href="#" class="ui-dialog-titlebar-close ui-dialog-content-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a></div><h2>There was a problem fetching the winning numbers data</h2></div>', ajaxOpts: { beforeSend: function (t) { r.data({ ajaxLock: !0 }); var n = setTimeout(function () { e(opts.spinnerSel).show() }, opts.showSpinnerAfter); t.always(function () { clearTimeout(n), e(opts.spinnerSel).hide() }) }, cache: !1, context: document.body, dataType: "html"} }; var i = r.metadata(); i = e.extend({}, opts, i), e("body").bind({ wnfoDialogOpen: function () { r.data({ dialogOpen: !0 }) }, wnfoDialogClose: function () { r.data({ dialogOpen: !1 }) } }); if (i.reloadOnActivate == 0 && r.data().wnPopulated == 1 || r.data().ajaxLock == 1 || r.data().dialogOpen == 1) return; i.ajaxOpts.url = i.flyoutDataTarget; var s = function () { r.data({ wnPopulated: !0, ajaxLock: !1 }), e("a", f).unbind("click.wnfo") }, o = function (t, n, i) { l(e(t), r) }, u = function (t, n, i) { l(e(opts.errorMessageHTML), r) }; e.ajax(i.ajaxOpts).always(s).then(o, u) }; e("#winning-numbers").bind("mouseenter", c).show(), e("a", f).click(function (e) { e.preventDefault() }) } $mIdDrop = e("#menu_drop"), $mClassDrop = e(".menu-drop"), navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || ($mIdDrop.length > 0 && $mIdDrop.find("option").size() > 0 && $mIdDrop.selectmenu({ style: "dropdown", maxHeight: 300 }), $mClassDrop.length > 0 && $mClassDrop.find("option").size() > 0 && $mClassDrop.selectmenu({ style: "dropdown", maxHeight: 300 })), e(".modal-close").click(function () { e(".winning_selected, .ui-widget-overlay").hide() }), e(".tag_even li:nth-child(2n), .tag_even tr:nth-child(2n)").addClass("even").addClass("end"), e(".tag_3rd_child li:nth-child(3n)").addClass("last").addClass("end"), e("#search button").bind("click", function (t) { t.preventDefault(); var n = e("#search input").val(), r = "/search?q=" + n; n && window.location.replace(r) }), e(".search-trigger").bind("click", function (t) { t.preventDefault(); var n = "/search?q=" + e(".search-trigger-subject").val(); window.location.href = n }), e("#search input, .search-trigger-subject").bind("keypress", function (t) { var n = t.keyCode ? t.keyCode : t.which; if (n == 13) { t.preventDefault(); var r = "/search?q=" + e(this).val(); window.location.replace(r) } }), $signIn = e(".sign-in"), $signIn.length > 0 && e("input.login_email").focus(), e("#main input").bind("keypress", function (t) { var n = e(this), r = t.keyCode ? t.keyCode : t.which, s = n.nextAll("a").first(), o = null; if (r == 13) { t.preventDefault(); if ($signIn.length > 0) e("input#btnSubmit").trigger("click"); else { try { o = s.get(0).nodeName.toLowerCase() } catch (u) { try { o = s.next().get(0).nodeName.toLowerCase() } catch (u) { var a = ["player_name", "small amount", "numberbox", "specialnumberbox", "placeholder bind"]; for (i = 0; i < a.length; i++) { var f = new RegExp(a[i], "i"); if (this.className.match(f)) { a[i] === "player_name" || a[i] === "small amount" ? e(".calculate").click() : a[i] === "numberbox" || a[i] === "specialnumberbox" ? window.location.href = e(this).parents("fieldset").siblings("fieldset").children("a").attr("href") : a[i] === "placeholder bind" && (window.location.href = e(this).parents("div").siblings("div").children("a").attr("href")); break } } } } o === "a" && (window.location.href = s.attr("href")) } return !1 } }), e(".security_notice").dialog({ autoOpen: !1, closeOnEscape: !0, modal: !0, resizable: !1, draggable: !1, minWidth: 800 }), e(".security_notice_trigger").click(function (t) { t.preventDefault(), e(".security_notice").dialog("open"), (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i)) && e(".security_notice").parent().css("left", "20px") }); if (e("input.placeholder-text")) { var h = ""; e("input.placeholder-text").each(function () { h = e(this).val(), e(this).prev().attr("placeholder", h) }), Modernizr.input.placeholder || e("input[placeholder]").placeholder() } if (!Modernizr.textshadow) { var p = 20, d = e(".ielt8 ul.scratcher-icons"); d.length > 0 && d.children().each(function () { var t = e(this); t.css("z-index", p), p-- }) } e(".winner-notification-dialog .uppad .fleft input[type=submit]").live("click", function (t) { if (!e(".winner-notification-dialog input[type=checkbox]").is(":checked")) return t.preventDefault(), e(".winner-notification-dialog .uppad .ftop .spacer").hide(), e(".winner-notification-dialog .uppad .ftop .error-message").show(), !1; e(".winner-notification-dialog .uppad .ftop .error-message").hide(), e(".winner-notification-dialog .uppad .ftop .spacer").show() }), e("div", "#submenu").live("loadDeferredImages", function (t) { $links = e(".deferImage", this), $links.each(function () { $link = e(this), $slug = $link.find(".slug"); if ($link.data().deferredImageLoaded === !0) return; img = document.createElement("img"), opts = {}; var t = { src: $slug.data("src"), height: $slug.data("height"), width: $slug.data("width"), alt: $slug.data("alt") }; obj = e.extend({}, opts, t), e(img).attr(obj), $slug.replaceWith(img), $link.data({ deferredImageLoaded: !0 }) }) }), e(".trigger_win_num").click(function (t) { t.preventDefault(), e(this).addClass("selected"), e(".trigger_jackpot").removeClass("selected"), e("ul.show_win_num").show(), e("ul.show_jackpot").hide() }), e(".trigger_jackpot").click(function (t) { t.preventDefault(), e(this).addClass("selected"), e(".trigger_win_num").removeClass("selected"), e("ul.show_jackpot").show(), e("ul.show_win_num").hide() }), e("dl.faq dt").click(function () { $this = e(this), $this.hasClass("closed") ? ($this.removeClass("closed"), $this.next().show()) : ($this.addClass("closed"), $this.next().hide()) }), e(".faq_parent_trigger").click(function (t) { t.preventDefault(); var n = e(this); n.nextUntil(".faq_parent").next().toggleClass("faq_parent_selected"), n.toggleClass("faq_wrapper_selected") }), e("body").hasClass("android") && e("dl.faq dt").each(function () { e(this).text(e.trim(e(this).text())) }), e(".game-slider").length > 0 && (e(".game-slider .game-slider-botton-next").click(function (t) { t.preventDefault(); var n = e(this), r = n.next("ol"); r.find(".game-slider-3").next().length > 0 && (r.find(".game-slider-1").removeClass("game-slider-1").next().addClass("game-slider-1"), r.find(".game-slider-2").removeClass("game-slider-2").next().addClass("game-slider-2"), r.find(".game-slider-3").removeClass("game-slider-3").next().addClass("game-slider-3")) }), e(".game-slider .game-slider-botton-prev").click(function (t) { t.preventDefault(); var n = e(this), r = n.next().next("ol"); r.find(".game-slider-1").prev().length > 0 && (r.find(".game-slider-3").removeClass("game-slider-3").prev().addClass("game-slider-3"), r.find(".game-slider-2").removeClass("game-slider-2").prev().addClass("game-slider-2"), r.find(".game-slider-1").removeClass("game-slider-1").prev().addClass("game-slider-1")) })), e("#start_date").length > 0 && e("#start_date").datepicker(), e("#end_date").length > 0 && e("#end_date").datepicker(), e(".winning_number_search_box input:radio").focus(function (t) { t.preventDefault(); var n = e(this).attr("id"), r = function (t, n, r) { e(t).attr("checked", "checked"), e(".winning_number_search_box ul." + n).hide(), e(".winning_number_search_box ul." + r).show() }; n == "serial" ? (r("input#" + n, "grid-3", "trigger, input#serial_number"), r("input#" + n, "grid-5", "trigger, input#serial_number")) : n == "numbers_trigger" && (r("input#numbers", "trigger, input#serial_number", "grid-3"), r("input#numbers", "trigger, input#serial_number", "grid-5")) }), e(".winning_number_search_box a.advanced_search_trigger").click(function (t) { t.preventDefault(), e(".basic_search").hide(), e(".advanced_search").show() }), e(".numberbox_wrapper .module_actions a").click(function (t) { t.preventDefault(); var n = e(this).parent().parent(), r = n.next(), i = e(this), s = !1; r.length == 0 ? (s = n.clone(!0), s.find("input").each(function () { i.val("") }), n.after(s), i.attr("class", "remove").text("Remove")) : i.attr("class") == "remove" && n.remove() }), e(".winning_number_search_box a.basic_search_trigger").click(function (t) { t.preventDefault(), e(".advanced_search").hide(), e(".basic_search").show() }), e(".advanced_search_trigger").click(function (t) { t.preventDefault(), e(".advanced_search").slideToggle() }); var v = {}; e(document).bind("keydown", function (e) { if (e.which !== 16) return; v[e.which] = !0 }), e(document).bind("keyup", function (e) { if (e.which !== 16) return; delete v[e.which] }), e("ul#main-nav li:last a:first").bind("keydown", function (t) { v[16] === undefined && (t.preventDefault(), t.which == 9 && e("ul.footer-nav:first", "div#footer-content").find("li a:first").focus()) }), e("ul.footer-nav:first", "div#footer-content").find("li a:first").bind("keydown", function (t) { v[16] === !0 && t.which === 9 && (t.preventDefault(), e("ul#main-nav li:last a:first").focus()) }) }), $(function () { $("a.reqVerfEmail").length && $("a.reqVerfEmail").click(function (e) { e.preventDefault(); var t, n, r = function () { t = $("#verfEmail").dialog({ autoOpen: !1, modal: !0, resizeable: !1, draggable: !1, width: 500, close: function () { t.dialog("destroy").appendTo("#objBody_content_0_pagecontent_0_upRequestVerificationEmail") } }), t.dialog("open"), n = t.find("button.close"), n.click(function (e) { e.preventDefault(), t.dialog("close") }) }, i = $("[id*=verfEmailUpdate]"); i.click(function () { $.ajax().complete(function (e) { r() }) }), i.trigger("click") }), $("#registration_form, #signinForm, #resetPass").delegate(":input", "keyup", function (e) { e.keyCode === 13 && $("#registration_form a.button span, #signinForm a.button span, #resetPass a.button span").click() }), $(".trigger-hiw, .hiw-button").click(function (e) { e.preventDefault(), $("#hiw-default").hide(), $("#hiw-overlay").show() }), $(".trigger-hiw-close").click(function (e) { e.preventDefault(), $("#hiw-overlay").hide(), $("#hiw-default").show() }), $("li.my-account a").click(function (e) { e.stopPropagation() }); if ($(".faq")) { var e = $(window.location.hash); if (e) { var t = e.closest(".faq_parent"); e.removeClass("closed").next().css("display", "block"), t && (t.toggleClass("faq_parent_selected"), t.prev().prev().addClass("faq_wrapper_selected")) } } $("#main").delegate(".info-message .close, .error-message .close, .success-message .close", "click", function (e) { e.preventDefault(), $(this).parent().fadeOut() }); var n = function () { typeof jQuery.ui != "undefined" && (clearInterval(r), $("#session_timeout").dialog({ modal: !0, draggable: !1, autoOpen: !1, width: 600 }).find(".close").click(function (e) { e.preventDefault(), $("#session_timeout").dialog("close") }), $("#session_timeout").dialog("open")) }; if (window.location.search.indexOf("timeout") > 0) { var r = setInterval(function () { n() }, 100), i = function () { clearInterval(r) }; setTimeout(i, 6e4) } $("a.prior-freq-num").click(function (e) { e.preventDefault(), $("#prior-freq-num").dialog({ width: 520, height: "auto", resizeable: !1, modal: !0 }).find("button.close").click(function () { $("#prior-freq-num").dialog("close") }), $("#prior-freq-num").parent().appendTo($("#frmMain")) }), $("a.prior-freq-freq").click(function (e) { e.preventDefault(), $("#prior-freq-freq").dialog({ width: 520, height: "auto", resizeable: !1, modal: !0 }).find("button.close").click(function () { $("#prior-freq-freq").dialog("close") }), $("#prior-freq-freq").parent().appendTo($("#frmMain")) }) });

$("#home .promo").hover(function () {
	$("#home .promo-hover").not($(this)).hide();
	$(this).next(".promo-hover").show();
}, function () {
	$("#home .promo-hover").mouseleave(function () {
		$(this).hide();
	})
});

$(".game-bar-pick-hook").on("change", function (event) {
    $.ajax({
        type: "GET",
        url: "/play?game=" + this.value,
        contentType: "text/HTML",
        success: function (data, textStatus) {
            $("#games-div").html(data);
        }
    });
});

$('.js-mmc-show-raffle').live('click', function (e) {
    e.preventDefault();
    $(this).hide();
    $(this).next('.js-mmc-winning-raffle').show();
});

$('.js-mmc-hide-raffle').live('click', function (e) {
    e.preventDefault();
    var closestRaffleNumbers = $(this).closest('.js-mmc-winning-raffle');
    closestRaffleNumbers.prev('.js-mmc-show-raffle').show();
    closestRaffleNumbers.hide();
});

function ShowRaffleWinners(draw) {
    $('#MMCRaffleWinners_' + draw).dialog({
        width: 600,
        height: 'auto',
        resizeable: false,
        modal: true,
        open: function () {
            $(this).parents('.ui-dialog').find('.ui-dialog-titlebar').hide();
        }
    }).find('.ui-dialog-titlebar-close').click(function () {
        $('#MMCRaffleWinners_' + draw).dialog('close');
    });

    $('#MMCRaffleWinners_' + draw).parent().appendTo($("#frmMain"));
}
